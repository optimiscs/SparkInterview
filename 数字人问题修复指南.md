# æ•°å­—äººé—®é¢˜ä¿®å¤æŒ‡å—

## é—®é¢˜æè¿°

ç”¨æˆ·åé¦ˆæ•°å­—äººè°ƒè¯•åŠŸèƒ½ä¸å·¥ä½œï¼Œæ§åˆ¶å°å‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š
- `avatarDebug.help()` è¿”å› `undefined`
- `await avatarDebug.testSpeak()` è¿”å› `false`
- `SDKEvents is not defined` é”™è¯¯
- `Cannot read properties of null (reading 'querySelector')` é”™è¯¯

## é—®é¢˜åŸå› 

1. **HTMLè¯­æ³•é”™è¯¯**: æ–‡ä»¶æœ«å°¾å­˜åœ¨é‡å¤çš„`</html></html>`æ ‡ç­¾
2. **SDKæ¨¡å—åŒ–é—®é¢˜**: è®¯é£æ•°å­—äººSDKä½¿ç”¨ES6æ¨¡å—æ ¼å¼ï¼Œéœ€è¦æ­£ç¡®çš„å¯¼å…¥æ–¹å¼
3. **åŠ è½½æ—¶åºé—®é¢˜**: SDKå’Œç®¡ç†å™¨çš„åˆå§‹åŒ–é¡ºåºä¸æ­£ç¡®
4. **ç¼ºå°‘äº‹ä»¶ç±»å‹å¯¼å…¥**: SDKçš„äº‹ä»¶ç±»å‹ï¼ˆSDKEventsï¼‰æœªæ­£ç¡®å¯¼å…¥
5. **å†—ä½™è„šæœ¬æ–‡ä»¶**: panel-toggle.js å¼•ç”¨äº†ä¸å­˜åœ¨çš„DOMå…ƒç´ 

## å·²ä¿®å¤çš„é—®é¢˜

### 1. HTMLè¯­æ³•ä¿®å¤

**ä¿®å¤æ–‡ä»¶**: `interview.html`
```html
<!-- ä¿®å¤å‰ -->
</body>
</html></html>

<!-- ä¿®å¤å -->
</body>
</html>
```

### 2. SDKå¯¼å…¥æ–¹å¼ä¿®å¤

**ä¿®å¤æ–‡ä»¶**: `interview.html`
```html
<!-- ä¿®å¤å‰ -->
<script src="./avatar-sdk-web_3.1.2.1002/index.js"></script>

<!-- ä¿®å¤å -->
<script type="module">
    // å¯¼å…¥æ•°å­—äººSDKå’Œç›¸å…³ç±»å‹
    import Avatar, { SDKEvents, PlayerEvents, RecorderEvents, UserMedia } from './avatar-sdk-web_3.1.2.1002/index.js';
    
    // å°†SDKå’Œäº‹ä»¶ç±»å‹æš´éœ²åˆ°å…¨å±€ä½œç”¨åŸŸ
    window.IAvatarPlatform = Avatar;
    window.AvatarPlatform = Avatar;
    window.SDKEvents = SDKEvents;
    window.PlayerEvents = PlayerEvents;
    window.RecorderEvents = RecorderEvents;
    window.UserMedia = UserMedia;
    
    // è§¦å‘è‡ªå®šä¹‰äº‹ä»¶é€šçŸ¥SDKå·²åŠ è½½
    window.dispatchEvent(new CustomEvent('avatarSDKLoaded', { 
        detail: { Avatar, SDKEvents, PlayerEvents, RecorderEvents, UserMedia } 
    }));
</script>
```

### 3. äº‹ä»¶ç±»å‹å¼•ç”¨ä¿®å¤

**ä¿®å¤æ–‡ä»¶**: `avatar-integration-manager.js`
```javascript
// ä¿®å¤å‰
this.avatarPlatform.on(SDKEvents.connected, (connectInfo) => {

// ä¿®å¤å
const Events = window.SDKEvents;
this.avatarPlatform.on(Events.connected, (connectInfo) => {
```

### 4. å†—ä½™è„šæœ¬æ¸…ç†

**ä¿®å¤æ“ä½œ**:
- åˆ é™¤ `panel-toggle.js` æ–‡ä»¶
- ä» `interview.html` ä¸­ç§»é™¤å¯¹è¯¥æ–‡ä»¶çš„å¼•ç”¨

### 3. åˆå§‹åŒ–æ—¶åºä¿®å¤

**ä¿®å¤æ–‡ä»¶**: `avatar-integration-manager.js`
- æ·»åŠ SDKåŠ è½½äº‹ä»¶ç›‘å¬
- å®ç°å¤‡ç”¨åŠ è½½æ–¹æ¡ˆ
- ä¼˜åŒ–åˆå§‹åŒ–æ—¶åº

## æ–°å¢çš„å·¥å…·

### 1. è¯Šæ–­å·¥å…· (`avatar-diagnostic.js`)
è‡ªåŠ¨æ£€æµ‹å’Œä¿®å¤å¸¸è§é—®é¢˜ï¼š
```javascript
// æ‰‹åŠ¨è¿è¡Œè¯Šæ–­
avatarFix.runDiagnostic()

// ä¿®å¤SDKåŠ è½½
avatarFix.fixSDK()

// åˆå§‹åŒ–ç®¡ç†å™¨
avatarFix.initManager()

// æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
avatarFix.showHelp()
```

### 2. å¿«é€Ÿæµ‹è¯•è„šæœ¬ (`avatar-quick-test.js`)
éªŒè¯ç³»ç»ŸåŠŸèƒ½ï¼š
```javascript
// è¿è¡Œå®Œæ•´æµ‹è¯•
avatarQuickTest.run()

// å•ç‹¬æµ‹è¯•SDK
avatarQuickTest.testSDK()

// æµ‹è¯•ç®¡ç†å™¨
avatarQuickTest.testManager()
```

## ä½¿ç”¨æ–¹æ³•

### 1. åˆ·æ–°é¡µé¢
é‡æ–°åŠ è½½é¡µé¢ä»¥åº”ç”¨æ‰€æœ‰ä¿®å¤ã€‚

### 2. æŸ¥çœ‹æ§åˆ¶å°è¾“å‡º
ç³»ç»Ÿä¼šè‡ªåŠ¨è¿è¡Œè¯Šæ–­å’Œæµ‹è¯•ï¼ŒæŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—ï¼š
```
ğŸ”§ æ•°å­—äººç³»ç»Ÿè¯Šæ–­å·¥å…·å¯åŠ¨
ğŸ§ª æ•°å­—äººå¿«é€Ÿæµ‹è¯•è„šæœ¬åŠ è½½
ğŸ¤– æ•°å­—äººSDKå·²åŠ è½½: function
ğŸ“„ é¡µé¢åŠ è½½å®Œæˆï¼Œç­‰å¾…æ•°å­—äººSDKåŠ è½½...
```

### 3. æ‰‹åŠ¨æµ‹è¯•å‘½ä»¤
å¦‚æœè‡ªåŠ¨æµ‹è¯•å¤±è´¥ï¼Œå¯ä»¥æ‰‹åŠ¨è¿è¡Œï¼š

```javascript
// æ£€æŸ¥è°ƒè¯•åŠ©æ‰‹çŠ¶æ€
avatarDebug.help()
avatarDebug.checkStatus()

// æµ‹è¯•è¯­éŸ³åŠŸèƒ½
await avatarDebug.testSpeak()

// è¿è¡Œè¯Šæ–­å·¥å…·
avatarFix.runDiagnostic()

// å¿«é€Ÿæµ‹è¯•æ‰€æœ‰åŠŸèƒ½
avatarQuickTest.run()
```

## é¢„æœŸç»“æœ

ä¿®å¤åï¼Œæ‚¨åº”è¯¥èƒ½çœ‹åˆ°ï¼š

1. **æˆåŠŸçš„è°ƒè¯•å‘½ä»¤**:
   ```javascript
   > avatarDebug.help()
   // æ˜¾ç¤ºå®Œæ•´çš„å¸®åŠ©ä¿¡æ¯

   > await avatarDebug.testSpeak()
   // è¿”å› true æˆ–è¿›è¡Œå®é™…çš„è¯­éŸ³æµ‹è¯•
   ```

2. **æ­£å¸¸çš„çŠ¶æ€æ£€æŸ¥**:
   ```javascript
   > avatarDebug.checkStatus()
   // æ˜¾ç¤ºè¯¦ç»†çš„ç³»ç»ŸçŠ¶æ€ä¿¡æ¯
   ```

3. **æ§åˆ¶å°æ—¥å¿—ç¡®è®¤**:
   ```
   âœ… æ•°å­—äººSDKå·²åŠ è½½
   âœ… æ•°å­—äººç®¡ç†å™¨å·²åˆå§‹åŒ–
   âœ… è°ƒè¯•åŠ©æ‰‹å·²åŠ è½½
   ğŸ‰ æ‰€æœ‰æµ‹è¯•å®Œæˆ!
   ```

## æ•…éšœæ’é™¤

### å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨ï¼š

1. **æ¸…é™¤æµè§ˆå™¨ç¼“å­˜**
   - æŒ‰ `Ctrl+Shift+Delete` (Windows) æˆ– `Cmd+Option+E` (Mac)
   - æ¸…é™¤ç¼“å­˜åé‡æ–°åŠ è½½é¡µé¢

2. **æ£€æŸ¥ç½‘ç»œè¿æ¥**
   - ç¡®ä¿èƒ½å¤Ÿè®¿é—®SDKæ–‡ä»¶
   - æ£€æŸ¥æµè§ˆå™¨å¼€å‘è€…å·¥å…·çš„Networkæ ‡ç­¾

3. **æ£€æŸ¥æ§åˆ¶å°é”™è¯¯**
   - æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·
   - æŸ¥çœ‹Consoleæ ‡ç­¾ä¸­çš„é”™è¯¯ä¿¡æ¯

4. **æ‰‹åŠ¨ä¿®å¤**
   ```javascript
   // è¿è¡Œå®Œæ•´è¯Šæ–­
   avatarFix.runDiagnostic()
   
   // å¦‚æœSDKåŠ è½½å¤±è´¥
   avatarFix.fixSDK()
   
   // å¦‚æœç®¡ç†å™¨åˆå§‹åŒ–å¤±è´¥
   avatarFix.initManager()
   ```

5. **å¤‡ç”¨æ–¹æ¡ˆ**
   å¦‚æœè‡ªåŠ¨ä¿®å¤å¤±è´¥ï¼Œå¯ä»¥å°è¯•ï¼š
   ```javascript
   // æ‰‹åŠ¨åŠ è½½å¤‡ç”¨SDK
   const script = document.createElement('script');
   script.src = './avatar-sdk-web_3.1.2.1002/index-OS7Lza_r.js';
   document.head.appendChild(script);
   ```

## æŠ€æœ¯ç»†èŠ‚

- **SDKç‰ˆæœ¬**: avatar-sdk-web_3.1.2.1002
- **æ”¯æŒçš„æµè§ˆå™¨**: Chrome, Firefox, Safari, Edge (æœ€æ–°ç‰ˆæœ¬)
- **ä¾èµ–**: ES6 Modules æ”¯æŒ
- **APIé…ç½®**: å·²é¢„è®¾è®¯é£æ˜Ÿç«APIå‚æ•°

## è”ç³»æ”¯æŒ

å¦‚æœé—®é¢˜æŒç»­å­˜åœ¨ï¼Œè¯·æä¾›ï¼š
1. æµè§ˆå™¨æ§åˆ¶å°çš„å®Œæ•´é”™è¯¯æ—¥å¿—
2. ä½¿ç”¨çš„æµè§ˆå™¨ç‰ˆæœ¬
3. è¿è¡Œ `avatarFix.runDiagnostic()` çš„è¾“å‡ºç»“æœ

---

*æœ€åæ›´æ–°ï¼š2024å¹´1æœˆ*

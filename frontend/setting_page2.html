<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>智能面试助手 - 简历解析</title>
<script src="https://cdn.tailwindcss.com/3.4.16"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css">
<script>
tailwind.config = {
theme: {
extend: {
colors: {
primary: '#3b82f6',
secondary: '#6366f1'
},
borderRadius: {
'none': '0px',
'sm': '4px',
DEFAULT: '8px',
'md': '12px',
'lg': '16px',
'xl': '20px',
'2xl': '24px',
'3xl': '32px',
'full': '9999px',
'button': '8px'
}
}
}
}
</script>
<style>
:where([class^="ri-"])::before {
content: "\f3c2";
}
.progress-bar {
transition: width 0.3s ease;
}
.fade-in {
animation: fadeIn 0.5s ease-in;
}
@keyframes fadeIn {
from { opacity: 0; transform: translateY(10px); }
to { opacity: 1; transform: translateY(0); }
}
.skill-tag {
transition: all 0.2s ease;
}
.skill-tag:hover {
transform: translateY(-1px);
box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}
</style>
</head>
<body class="bg-gray-50 min-h-screen">
<div class="flex h-screen flex-col">
<!-- 顶部导航栏 -->
<div class="bg-white shadow-sm">
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
<div class="flex justify-between items-center h-16">
<div class="flex items-center">
<a href="./setting_page1.html" data-readdy="true" class="flex items-center text-gray-600 hover:text-gray-900 mr-6">
<div class="w-5 h-5 flex items-center justify-center mr-2">
<i class="ri-arrow-left-line"></i>
</div>
返回配置
</a>

<nav class="flex space-x-8">
  <a href="assessment-options.html" class="flex items-center">
    <img src="./static/logo.png" alt="logo" class="h-8 w-8 mr-2 inline-block align-middle">
    <p class="text-sm text-gray-600 ml-2">职面星火</p>
  </a>
  <nav class="flex space-x-8">
  <a href="../index.html" class="flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:text-gray-900">
  <div class="w-5 h-5 flex items-center justify-center mr-2">
  <i class="ri-home-line"></i>
  </div>
  首页
  </a>
  <a href="./setting_page1.html" class="flex items-center px-3 py-2 text-sm font-medium text-primary">
  <div class="w-5 h-5 flex items-center justify-center mr-2">
  <i class="ri-video-chat-line"></i>
  </div>
  面试模拟
  </a>
  <a href="./assessment-options.html" class="flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:text-gray-900">
  <div class="w-5 h-5 flex items-center justify-center mr-2">
  <i class="ri-bar-chart-line"></i>
  </div>
  能力评估
  </a>
  <a href="./learning-resources.html" class="flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:text-gray-900">
  <div class="w-5 h-5 flex items-center justify-center mr-2">
  <i class="ri-book-open-line"></i>
  </div>
  学习资源
  </a>
  <a href="./user-profile.html" class="flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:text-gray-900">
  <div class="w-5 h-5 flex items-center justify-center mr-2">
  <i class="ri-user-settings-line"></i>
  </div>
  个人中心
  </a>
</nav>
<div class="flex items-center">
<div class="w-8 h-8 bg-primary rounded-full flex items-center justify-center">
<i class="ri-user-line text-white"></i>
</div>
<div class="ml-2">
<p class="text-sm font-medium text-gray-900">李明华</p>
<p class="text-xs text-gray-500">高级用户</p>
</div>
</div>
</div>
</div>
</div>
<!-- 主要内容区 -->
<div class="flex-1 flex overflow-hidden bg-gray-50">
<!-- 左侧主要内容区 -->
<div class="flex-1 flex flex-col overflow-hidden">
<div class="bg-white border-b border-gray-200 px-8 py-6">
<h1 class="text-2xl font-bold text-gray-900">简历解析</h1>
<p class="text-gray-600 mt-1">系统正在调用Spark Pro智能解析您的简历，提取关键信息和技能点</p>
</div>
<!-- 进度指示器 -->
<div class="bg-white border-b border-gray-200 px-8 py-4">
<div class="flex items-center justify-between">
<div class="flex items-center">
<div class="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center text-white text-sm font-medium">
<i class="ri-check-line"></i>
</div>
<span class="ml-2 text-sm font-medium text-green-600">基础信息</span>
</div>
<div class="flex-1 mx-4 h-px bg-green-300"></div>
<div class="flex items-center">
<div class="w-8 h-8 bg-primary rounded-full flex items-center justify-center text-white text-sm font-medium">2</div>
<span class="ml-2 text-sm font-medium text-primary">简历解析</span>
</div>
<div class="flex-1 mx-4 h-px bg-gray-300"></div>
<div class="flex items-center">
<div class="w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center text-gray-500 text-sm font-medium">3</div>
<span class="ml-2 text-sm text-gray-500">题目生成</span>
</div>
</div>
</div>
<div class="flex-1 flex overflow-hidden">
<!-- 简历预览区 -->
<div class="flex-1 p-8 overflow-y-auto">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 h-full">
<div class="p-6 border-b border-gray-200 flex items-center justify-between">
<h3 class="text-lg font-semibold text-gray-900">简历预览</h3>
<div class="flex items-center space-x-2">
<button class="p-2 text-gray-400 hover:text-gray-600">
<div class="w-5 h-5 flex items-center justify-center">
<i class="ri-zoom-out-line"></i>
</div>
</button>
<span class="text-sm text-gray-500">100%</span>
<button class="p-2 text-gray-400 hover:text-gray-600">
<div class="w-5 h-5 flex items-center justify-center">
<i class="ri-zoom-in-line"></i>
</div>
</button>
</div>
</div>
<div class="p-6 flex-1 bg-gray-50">
<div class="bg-white rounded-lg shadow-sm p-8 max-w-2xl mx-auto" style="min-height: 800px;" id="resumePreview">
<div class="text-center mb-8">
<h1 class="text-3xl font-bold text-gray-900 mb-2" id="resumeName">莫栩</h1>
<p class="text-lg text-gray-600 mb-4" id="resumePosition">算法工程师</p>
<div class="flex justify-center space-x-6 text-sm text-gray-600">
<div class="flex items-center" id="resumePhone">
<i class="ri-phone-line mr-1"></i>
13480805647
</div>
<div class="flex items-center" id="resumeEmail">
<i class="ri-mail-line mr-1"></i>
2022302181277@whu.edu.cn
</div>
<div class="flex items-center" id="resumeCity">
<i class="ri-map-pin-line mr-1"></i>
武汉市
</div>
</div>
</div>
<div class="space-y-8">
<div>
<h2 class="text-xl font-semibold text-gray-900 mb-4 border-b-2 border-primary pb-2">工作经历</h2>
<div class="space-y-6" id="resumeExperience">
<div>
<div class="flex justify-between items-start mb-2">
<h3 class="text-lg font-medium text-gray-900">武汉大学 - 学生</h3>
<span class="text-sm text-gray-600">2022.09 - 2026.06</span>
</div>
<ul class="text-gray-700 space-y-1 ml-4">
<li>• 大模型微调的安全对齐研究</li>
<li>• 舆情分析系统开发</li>
<li>• 创新发明与知识产权协会副会长</li>
</ul>
</div>
<div>
<div class="flex justify-between items-start mb-2">
<h3 class="text-lg font-medium text-gray-900">电商电群 - 创业者</h3>
<span class="text-sm text-gray-600">2023.06 - 至今</span>
</div>
<ul class="text-gray-700 space-y-1 ml-4">
<li>• 团队管理：组建9人跨职能团队</li>
<li>• 效率优化：引入智能发货机器人</li>
<li>• 规模拓展：运营七个店铺，服务超二十万用户</li>
</ul>
</div>
</div>
</div>
<div>
<h2 class="text-xl font-semibold text-gray-900 mb-4 border-b-2 border-primary pb-2">项目经验</h2>
<div class="space-y-4" id="resumeProjects">
<div>
<h3 class="text-lg font-medium text-gray-900 mb-2">大模型微调的安全对齐研究</h3>
<p class="text-gray-700 mb-2">成功复现ICLR的关键结论，采用GPT-4o对目标大语言模型输出进行精细化安全性量化评估</p>
<p class="text-sm text-gray-600">技术栈：Python, PyTorch, GPT-4o, 安全评估</p>
</div>
<div>
<h3 class="text-lg font-medium text-gray-900 mb-2">舆情分析系统</h3>
<p class="text-gray-700 mb-2">前后端分离架构，支持实时情感分析和热点事件检测</p>
<p class="text-sm text-gray-600">技术栈：React, FastAPI, Redis, MongoDB, Docker</p>
</div>
<div>
<h3 class="text-lg font-medium text-gray-900 mb-2">电商电群运营</h3>
<p class="text-gray-700 mb-2">从零开始孵化并运营七个店铺，形成店群效应，C端营收突破百万</p>
<p class="text-sm text-gray-600">技术栈：团队管理, 自动化系统, 数据分析</p>
</div>
</div>
</div>
<div>
<h2 class="text-xl font-semibold text-gray-900 mb-4 border-b-2 border-primary pb-2">技能专长</h2>
<div class="grid grid-cols-2 gap-4" id="resumeSkills">
<div>
<h4 class="font-medium text-gray-900 mb-2">编程语言</h4>
<p class="text-gray-700">Python, JavaScript, Java</p>
</div>
<div>
<h4 class="font-medium text-gray-900 mb-2">框架工具</h4>
<p class="text-gray-700">PyTorch, Springboot, React, FastAPI</p>
</div>
<div>
<h4 class="font-medium text-gray-900 mb-2">数据库</h4>
<p class="text-gray-700">Redis, MongoDB, MySQL</p>
</div>
<div>
<h4 class="font-medium text-gray-900 mb-2">其他工具</h4>
<p class="text-gray-700">Docker, Git, Linux</p>
</div>
</div>
</div>
<div>
<h2 class="text-xl font-semibold text-gray-900 mb-4 border-b-2 border-primary pb-2">教育背景</h2>
<div>
<div class="flex justify-between items-start mb-2">
<h3 class="text-lg font-medium text-gray-900">武汉大学 - 网络空间安全</h3>
<span class="text-sm text-gray-600">2022.09 - 2026.06</span>
</div>
<p class="text-gray-700">本科 | GPA: 3.72/4.0</p>
</div>
</div>
</div>
</div>
</div>
</div>
<!-- 解析进度区 -->
<div class="w-96 bg-white border-l border-gray-200 p-6 overflow-y-auto">
<h3 class="text-lg font-semibold text-gray-900 mb-6">解析进度</h3>
<!-- 总体进度 -->
<div class="mb-8">
<div class="flex items-center justify-between mb-2">
<span class="text-sm font-medium text-gray-700">整体进度</span>
<span class="text-sm text-primary font-medium" id="overallProgress">100%</span>
</div>
<div class="w-full bg-gray-200 rounded-full h-2">
<div class="bg-primary h-2 rounded-full progress-bar" id="overallBar" style="width: 100%"></div>
</div>
</div>
<!-- 各模块进度 -->
<div class="space-y-6">
<div class="fade-in">
<div class="flex items-center mb-3">
<div class="w-6 h-6 bg-green-500 rounded-full flex items-center justify-center mr-3">
<i class="ri-check-line text-white text-sm"></i>
</div>
<h4 class="text-sm font-medium text-gray-900">基本信息提取</h4>
</div>
<div class="ml-9 text-xs text-gray-600 space-y-1" id="basicInfoDetails">
<p>✓ 姓名：莫栩</p>
<p>✓ 联系方式：已提取</p>
<p>✓ 工作年限：2 年</p>
</div>
</div>
<div class="fade-in">
<div class="flex items-center mb-3">
<div class="w-6 h-6 bg-green-500 rounded-full flex items-center justify-center mr-3">
<i class="ri-check-line text-white text-sm"></i>
</div>
<h4 class="text-sm font-medium text-gray-900">技能点识别</h4>
</div>
<div class="ml-9" id="skillsDetails">
<div class="flex flex-wrap gap-1 mb-2" id="skillsTags">
<span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded skill-tag">Python</span>
<span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded skill-tag">PyTorch</span>
<span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded skill-tag">Springboot</span>
<span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded skill-tag">React</span>
<span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded skill-tag">Docker</span>
<span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded skill-tag">FastAPI</span>
<span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded skill-tag">Redis</span>
<span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded skill-tag">MongoDB</span>
</div>
<p class="text-xs text-gray-600" id="skillsCount">已识别 8 个核心技能</p>
</div>
</div>
<div class="fade-in">
<div class="flex items-center mb-3">
<div class="w-6 h-6 bg-green-500 rounded-full flex items-center justify-center mr-3">
<i class="ri-check-line text-white text-sm"></i>
</div>
<h4 class="text-sm font-medium text-gray-900">项目经验提取</h4>
</div>
<div class="ml-9 space-y-3" id="projectsDetails">
<div class="bg-gray-50 rounded-lg p-3">
<h5 class="text-sm font-medium text-gray-900">大模型微调的安全对齐研究</h5>
<p class="text-xs text-gray-600 mt-1">AI安全 • 模型微调 • 安全评估</p>
<div class="flex items-center mt-2 text-xs text-green-600">
<i class="ri-time-line mr-1"></i>
2025.03 - 至今
</div>
</div>
<div class="bg-gray-50 rounded-lg p-3">
<h5 class="text-sm font-medium text-gray-900">舆情分析系统</h5>
<p class="text-xs text-gray-600 mt-1">前后端分离 • 情感分析 • 实时检测</p>
<div class="flex items-center mt-2 text-xs text-green-600">
<i class="ri-time-line mr-1"></i>
2024.11 - 至今
</div>
</div>
<div class="bg-gray-50 rounded-lg p-3">
<h5 class="text-sm font-medium text-gray-900">电商电群运营</h5>
<p class="text-xs text-gray-600 mt-1">团队管理 • 自动化系统 • 数据分析</p>
<div class="flex items-center mt-2 text-xs text-green-600">
<i class="ri-time-line mr-1"></i>
2023.06 - 至今
</div>
</div>
</div>
</div>
<div class="fade-in">
<div class="flex items-center mb-3">
<div class="w-6 h-6 bg-green-500 rounded-full flex items-center justify-center mr-3">
<i class="ri-check-line text-white text-sm"></i>
</div>
<h4 class="text-sm font-medium text-gray-900">工作经历分析</h4>
</div>
<div class="ml-9 space-y-3" id="experienceDetails">
<div class="border-l-2 border-primary pl-4">
<div class="flex items-center justify-between mb-1">
<h5 class="text-sm font-medium text-gray-900">武汉大学</h5>
<span class="text-xs text-gray-500">2022.09 - 2026.06</span>
</div>
<p class="text-xs text-gray-600 mb-2">学生</p>
<div class="space-y-1 text-xs text-gray-600">
<p>• 大模型微调的安全对齐研究</p>
<p>• 舆情分析系统开发</p>
<p>• 创新发明与知识产权协会副会长</p>
</div>
</div>
<div class="border-l-2 border-gray-300 pl-4">
<div class="flex items-center justify-between mb-1">
<h5 class="text-sm font-medium text-gray-900">电商电群</h5>
<span class="text-xs text-gray-500">2023.06 - 至今</span>
</div>
<p class="text-xs text-gray-600 mb-2">创业者</p>
<div class="space-y-1 text-xs text-gray-600">
<p>• 团队管理：组建9人跨职能团队</p>
<p>• 效率优化：引入智能发货机器人</p>
<p>• 规模拓展：运营七个店铺，服务超二十万用户</p>
</div>
</div>
</div>
</div>
</div>
<!-- 解析结果摘要 -->
<div class="mt-8 bg-green-50 rounded-lg p-4">
<div class="flex items-center mb-3">
<div class="w-5 h-5 flex items-center justify-center mr-2">
<i class="ri-check-double-line text-green-600"></i>
</div>
<h4 class="text-sm font-medium text-green-900">解析完成</h4>
</div>
<div class="text-xs text-green-700 space-y-1" id="analysisSummary">
<p>• 识别技能点：8 个</p>
<p>• 提取项目经验：3 个</p>
<p>• 分析工作经历：2 段</p>
<p>• 匹配度评分：82%</p>
</div>
</div>
<!-- 操作按钮 -->
<div class="flex flex-col space-y-3 mt-8">
<button class="w-full px-4 py-2 text-primary border border-primary rounded-button hover:bg-primary/5 whitespace-nowrap !rounded-button" id="reAnalyze">
<div class="w-4 h-4 flex items-center justify-center mr-2 inline-block">
<i class="ri-refresh-line"></i>
</div>
重新解析
</button>
<button class="w-full px-4 py-2 text-gray-600 border border-gray-300 rounded-button hover:bg-gray-50 whitespace-nowrap !rounded-button" id="exportResult">
<div class="w-4 h-4 flex items-center justify-center mr-2 inline-block">
<i class="ri-download-line"></i>
</div>
导出结果
</button>
<a href="./setting_page3.html" data-readdy="true">
<button class="w-full px-4 py-3 bg-primary text-white rounded-button hover:bg-primary/90 whitespace-nowrap !rounded-button" id="nextStep">
<div class="w-4 h-4 flex items-center justify-center mr-2 inline-block">
<i class="ri-arrow-right-line"></i>
</div>
下一步：生成题目
</button>
</a>
</div>
</div>
</div>
</div>
</div>
<script id="progress-animation">
document.addEventListener('DOMContentLoaded', function() {
// 检查是否有来自上一页的分析结果
const urlParams = new URLSearchParams(window.location.search);
const taskId = urlParams.get('taskId');

if (taskId) {
// 如果有taskId，从后端获取JSON数据
loadAnalysisDataFromBackend(taskId);
} else {
// 否则启动模拟进度
startSimulatedProgress();
}
});

async function loadAnalysisDataFromBackend(taskId) {
try {
console.log('🔄 正在从后端加载分析数据...');
const response = await fetch(`/api/v1/resume/json/${taskId}`);
const result = await response.json();

if (result.success && result.data) {
console.log('✅ 成功加载分析数据:', result.data);
displayAnalysisResults(result.data);
} else {
console.error('❌ 加载分析数据失败:', result.message);
startSimulatedProgress();
}
} catch (error) {
console.error('❌ 加载分析数据异常:', error);
startSimulatedProgress();
}
}

function startSimulatedProgress() {
const progressSteps = [
{ id: 'basicInfo', delay: 500, duration: 1000, label: '基本信息提取' },
{ id: 'skillExtraction', delay: 1500, duration: 1500, label: '技能点识别' },
{ id: 'projectExtraction', delay: 3000, duration: 1200, label: '项目经验提取' },
{ id: 'workAnalysis', delay: 4200, duration: 1000, label: '工作经历分析' }
];

let currentProgress = 0;
const totalSteps = progressSteps.length;

function updateOverallProgress() {
const percentage = Math.round((currentProgress / totalSteps) * 100);
document.getElementById('overallProgress').textContent = percentage + '%';
document.getElementById('overallBar').style.width = percentage + '%';
}

function updateProgressLabel(label) {
const progressLabel = document.querySelector('.text-sm.text-gray-500');
if (progressLabel) {
progressLabel.textContent = label;
}
}

setTimeout(() => {
const fadeElements = document.querySelectorAll('.fade-in');
fadeElements.forEach((el, index) => {
setTimeout(() => {
el.style.opacity = '1';
currentProgress++;
updateOverallProgress();
if (progressSteps[index]) {
updateProgressLabel(progressSteps[index].label);
}
}, index * 1000);
});
}, 1000);
}

function displayAnalysisResults(data) {
// 更新左侧简历预览区域
if (data.basic_info) {
const basicInfo = data.basic_info;
updateResumePreview(basicInfo);
}

if (data.experience && data.experience.length > 0) {
updateResumeExperience(data.experience);
}

if (data.projects && data.projects.length > 0) {
updateResumeProjects(data.projects);
}

if (data.skills_categories) {
updateResumeSkills(data.skills_categories);
}

// 更新右侧解析进度区域
updateProgressDetails(data);

console.log('✅ 一次分析，两次渲染完成');
console.log('📊 左侧简历预览已更新');
console.log('📊 右侧解析进度已更新');
}

function updateResumePreview(basicInfo) {
// 更新简历预览中的基本信息
const nameElement = document.getElementById('resumeName');
if (nameElement && basicInfo.name) {
nameElement.textContent = basicInfo.name;
}

const positionElement = document.getElementById('resumePosition');
if (positionElement && basicInfo.current_position) {
positionElement.textContent = basicInfo.current_position;
}

const phoneElement = document.getElementById('resumePhone');
if (phoneElement && basicInfo.phone) {
phoneElement.innerHTML = `<i class="ri-phone-line mr-1"></i>${basicInfo.phone}`;
}

const emailElement = document.getElementById('resumeEmail');
if (emailElement && basicInfo.email) {
emailElement.innerHTML = `<i class="ri-mail-line mr-1"></i>${basicInfo.email}`;
}

const cityElement = document.getElementById('resumeCity');
if (cityElement && basicInfo.city) {
cityElement.innerHTML = `<i class="ri-map-pin-line mr-1"></i>${basicInfo.city}`;
}
}

function updateResumeExperience(experience) {
const experienceContainer = document.getElementById('resumeExperience');
if (experienceContainer && experience && experience.length > 0) {
experienceContainer.innerHTML = '';
experience.forEach(exp => {
const expDiv = document.createElement('div');
expDiv.innerHTML = `
<div class="flex justify-between items-start mb-2">
<h3 class="text-lg font-medium text-gray-900">${exp.company} - ${exp.position}</h3>
<span class="text-sm text-gray-600">${exp.period}</span>
</div>
<ul class="text-gray-700 space-y-1 ml-4">
${exp.responsibilities.map(resp => `<li>• ${resp}</li>`).join('')}
</ul>
`;
experienceContainer.appendChild(expDiv);
});
}
}

function updateResumeProjects(projects) {
const projectsContainer = document.getElementById('resumeProjects');
if (projectsContainer && projects && projects.length > 0) {
projectsContainer.innerHTML = '';
projects.forEach(project => {
const projectDiv = document.createElement('div');
projectDiv.innerHTML = `
<h3 class="text-lg font-medium text-gray-900 mb-2">${project.name}</h3>
<p class="text-gray-700 mb-2">${project.description}</p>
<p class="text-sm text-gray-600">技术栈：${project.tech_stack}</p>
`;
projectsContainer.appendChild(projectDiv);
});
}
}

function updateResumeSkills(skillsCategories) {
const skillsContainer = document.getElementById('resumeSkills');
if (skillsContainer && skillsCategories) {
const skillSections = [
{ title: '编程语言', skills: skillsCategories.programming_languages || [] },
{ title: '框架工具', skills: skillsCategories.frameworks || [] },
{ title: '数据库', skills: skillsCategories.databases || [] },
{ title: '其他工具', skills: skillsCategories.tools || [] }
];

skillsContainer.innerHTML = '';
skillSections.forEach(section => {
if (section.skills.length > 0) {
const sectionDiv = document.createElement('div');
sectionDiv.innerHTML = `
<h4 class="font-medium text-gray-900 mb-2">${section.title}</h4>
<p class="text-gray-700">${section.skills.join(', ')}</p>
`;
skillsContainer.appendChild(sectionDiv);
}
});
}
}

// 更新右侧解析进度区域
function updateProgressDetails(data) {
// 更新基本信息详情
if (data.basic_info) {
const basicInfo = data.basic_info;
const basicInfoDetails = document.getElementById('basicInfoDetails');
if (basicInfoDetails) {
basicInfoDetails.innerHTML = `
<p>✓ 姓名：${basicInfo.name || 'N/A'}</p>
<p>✓ 联系方式：${basicInfo.phone ? '已提取' : '未找到'}</p>
<p>✓ 工作年限：${basicInfo.experience_years || 'N/A'}</p>
`;
}
}

// 更新技能点详情
if (data.skills && data.skills.length > 0) {
const skillsTags = document.getElementById('skillsTags');
const skillsCount = document.getElementById('skillsCount');
if (skillsTags) {
skillsTags.innerHTML = '';
data.skills.slice(0, 8).forEach(skill => { // 最多显示8个技能
const skillTag = document.createElement('span');
skillTag.className = 'px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded skill-tag';
skillTag.textContent = skill;
skillsTags.appendChild(skillTag);
});
}
if (skillsCount) {
skillsCount.textContent = `已识别 ${data.skills.length} 个核心技能`;
}
}

// 更新项目经验详情
if (data.projects && data.projects.length > 0) {
const projectsDetails = document.getElementById('projectsDetails');
if (projectsDetails) {
projectsDetails.innerHTML = '';
data.projects.slice(0, 3).forEach(project => { // 最多显示3个项目
const projectDiv = document.createElement('div');
projectDiv.className = 'bg-gray-50 rounded-lg p-3';
projectDiv.innerHTML = `
<h5 class="text-sm font-medium text-gray-900">${project.name}</h5>
<p class="text-xs text-gray-600 mt-1">${project.description.substring(0, 50)}...</p>
<div class="flex items-center mt-2 text-xs text-green-600">
<i class="ri-time-line mr-1"></i>
${project.period || ''}
</div>
`;
projectsDetails.appendChild(projectDiv);
});
}
}

// 更新工作经历详情
if (data.experience && data.experience.length > 0) {
const experienceDetails = document.getElementById('experienceDetails');
if (experienceDetails) {
experienceDetails.innerHTML = '';
data.experience.slice(0, 2).forEach((exp, index) => { // 最多显示2段经历
const expDiv = document.createElement('div');
expDiv.className = `border-l-2 ${index === 0 ? 'border-primary' : 'border-gray-300'} pl-4`;
expDiv.innerHTML = `
<div class="flex items-center justify-between mb-1">
<h5 class="text-sm font-medium text-gray-900">${exp.company}</h5>
<span class="text-xs text-gray-500">${exp.period}</span>
</div>
<p class="text-xs text-gray-600 mb-2">${exp.position}</p>
<div class="space-y-1 text-xs text-gray-600">
${exp.responsibilities.slice(0, 3).map(resp => `<p>• ${resp}</p>`).join('')}
</div>
`;
experienceDetails.appendChild(expDiv);
});
}
}

// 更新分析摘要
if (data.analysis) {
const analysisSummary = document.getElementById('analysisSummary');
if (analysisSummary) {
const skillsCount = data.skills ? data.skills.length : 0;
const projectsCount = data.projects ? data.projects.length : 0;
const experienceCount = data.experience ? data.experience.length : 0;
const matchScore = data.analysis.overall_match || 0;

analysisSummary.innerHTML = `
<p>• 识别技能点：${skillsCount} 个</p>
<p>• 提取项目经验：${projectsCount} 个</p>
<p>• 分析工作经历：${experienceCount} 段</p>
<p>• 匹配度评分：${matchScore}%</p>
`;
}
}
}
</script>
<script id="skill-interaction">
document.addEventListener('DOMContentLoaded', function() {
const skillTags = document.querySelectorAll('.skill-tag');
skillTags.forEach(tag => {
tag.addEventListener('click', function() {
this.classList.toggle('bg-blue-100');
this.classList.toggle('text-blue-800');
this.classList.toggle('bg-red-100');
this.classList.toggle('text-red-800');
});
});
});
</script>
<script id="button-handlers">
document.addEventListener('DOMContentLoaded', function() {
const reAnalyzeBtn = document.getElementById('reAnalyze');
const exportBtn = document.getElementById('exportResult');
const nextStepBtn = document.getElementById('nextStep');
reAnalyzeBtn.addEventListener('click', function() {
const dialog = document.createElement('div');
dialog.className = 'fixed inset-0 flex items-center justify-center z-50';
dialog.innerHTML = `
<div class="fixed inset-0 bg-black/50"></div>
<div class="relative bg-white rounded-lg p-6 max-w-sm w-full mx-4">
<h3 class="text-lg font-medium text-gray-900 mb-2">确认重新解析</h3>
<p class="text-gray-600 mb-4">重新解析将覆盖当前结果，是否继续？</p>
<div class="flex space-x-3">
<button class="flex-1 px-4 py-2 text-gray-600 border border-gray-300 rounded-button hover:bg-gray-50" onclick="this.closest('.fixed').remove()">取消</button>
<button class="flex-1 px-4 py-2 bg-primary text-white rounded-button hover:bg-primary/90" onclick="this.closest('.fixed').remove(); startReAnalysis()">确认</button>
</div>
</div>
`;
document.body.appendChild(dialog);
});
exportBtn.addEventListener('click', function() {
const dialog = document.createElement('div');
dialog.className = 'fixed inset-0 flex items-center justify-center z-50';
dialog.innerHTML = `
<div class="fixed inset-0 bg-black/50"></div>
<div class="relative bg-white rounded-lg p-6 max-w-sm w-full mx-4">
<h3 class="text-lg font-medium text-gray-900 mb-2">导出成功</h3>
<p class="text-gray-600 mb-4">解析结果已导出到下载文件夹</p>
<button class="w-full px-4 py-2 bg-primary text-white rounded-button" onclick="this.closest('.fixed').remove()">确定</button>
</div>
`;
document.body.appendChild(dialog);
});
nextStepBtn.addEventListener('click', function(e) {
  const urlParams = new URLSearchParams(window.location.search);
  const taskId = urlParams.get('taskId');
  if (taskId) {
    window.location.href = `./setting_page3.html?taskId=${taskId}`;
  } else {
    e.preventDefault();
    alert('未获取到简历分析任务ID，无法进入题目生成页！');
  }
});
window.startReAnalysis = function() {
document.getElementById('overallProgress').textContent = '0%';
document.getElementById('overallBar').style.width = '0%';
const fadeElements = document.querySelectorAll('.fade-in');
fadeElements.forEach(el => {
el.style.opacity = '0.3';
});
setTimeout(() => {
fadeElements.forEach((el, index) => {
setTimeout(() => {
el.style.opacity = '1';
}, index * 800);
});
document.getElementById('overallProgress').textContent = '100%';
document.getElementById('overallBar').style.width = '100%';
}, 2000);
};
});
</script>
</body>
</html>
<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>æ™ºèƒ½é¢è¯•åŠ©æ‰‹ - é¢è¯•å‡†å¤‡é…ç½®</title>
<script src="https://cdn.tailwindcss.com/3.4.16"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css">
<script>
tailwind.config = {
theme: {
extend: {
colors: {
primary: '#3b82f6',
secondary: '#6366f1'
},
borderRadius: {
'none': '0px',
'sm': '4px',
DEFAULT: '8px',
'md': '12px',
'lg': '16px',
'xl': '20px',
'2xl': '24px',
'3xl': '32px',
'full': '9999px',
'button': '8px'
}
}
}
}
</script>
<style>
:where([class^="ri-"])::before {
content: "\f3c2";
}
</style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
<div class="bg-white shadow-sm">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
  <div class="flex justify-between items-center h-16">
  <a href="assessment-options.html" class="flex items-center">
    <img src="./static/logo.png" alt="logo" class="h-8 w-8 mr-2 inline-block align-middle">
    <p class="text-sm text-gray-600 ml-2">èŒé¢æ˜Ÿç«</p>
  </a>
  <nav class="flex space-x-8">
  <a href="../index.html" class="flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:text-gray-900">
  <div class="w-5 h-5 flex items-center justify-center mr-2">
  <i class="ri-home-line"></i>
  </div>
  é¦–é¡µ
  </a>
  <a href="./setting_page1.html" class="flex items-center px-3 py-2 text-sm font-medium text-primary">
  <div class="w-5 h-5 flex items-center justify-center mr-2">
  <i class="ri-video-chat-line"></i>
  </div>
  é¢è¯•æ¨¡æ‹Ÿ
  </a>
  <a href="./assessment-options.html" class="flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:text-gray-900">
  <div class="w-5 h-5 flex items-center justify-center mr-2">
  <i class="ri-bar-chart-line"></i>
  </div>
  èƒ½åŠ›è¯„ä¼°
  </a>
  <a href="./learning-resources.html" class="flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:text-gray-900">
  <div class="w-5 h-5 flex items-center justify-center mr-2">
  <i class="ri-book-open-line"></i>
  </div>
  å­¦ä¹ èµ„æº
  </a>
  <a href="./user-profile.html" class="flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:text-gray-900">
  <div class="w-5 h-5 flex items-center justify-center mr-2">
  <i class="ri-user-settings-line"></i>
  </div>
  ä¸ªäººä¸­å¿ƒ
  </a>
  </nav>
  <div class="flex items-center">
  <div class="w-8 h-8 bg-primary rounded-full flex items-center justify-center">
  <i class="ri-user-line text-white"></i>
  </div>
  <div class="ml-2">
  <p class="text-sm font-medium text-gray-900">ææ˜å</p>
  <p class="text-xs text-gray-500">é«˜çº§ç”¨æˆ·</p>
  </div>
  </div>
  </div>
  </div>
  </div>
<div class="flex h-screen">

<!-- ä¸­é—´ä¸»è¦å†…å®¹åŒº -->
<div class="flex-1 flex flex-col overflow-hidden">

<div class="bg-white border-b border-gray-200 px-8 py-6">
<h1 class="text-2xl font-bold text-gray-900">é¢è¯•å‡†å¤‡é…ç½®</h1>
<p class="text-gray-600 mt-1">é…ç½®æ‚¨çš„é¢è¯•ç›®æ ‡å’Œä¸Šä¼ ç®€å†ï¼Œç³»ç»Ÿå°†ä¸ºæ‚¨æ¨èæœ€é€‚åˆçš„é¢è¯•é¢˜ç›®</p>
</div>

<div class="flex-1 overflow-y-auto p-8 h-[calc(100vh-64px)]">
<!-- è¿›åº¦æŒ‡ç¤ºå™¨ -->
<div class="mb-8">
<div class="flex items-center justify-between">
<div class="flex items-center">
<div class="w-8 h-8 bg-primary rounded-full flex items-center justify-center text-white text-sm font-medium">1</div>
<span class="ml-2 text-sm font-medium text-primary">åŸºç¡€ä¿¡æ¯</span>
</div>
<div class="flex-1 mx-4 h-px bg-gray-300"></div>
<div class="flex items-center">
<div class="w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center text-gray-500 text-sm font-medium">2</div>
<span class="ml-2 text-sm text-gray-500">ç®€å†è§£æ</span>
</div>
<div class="flex-1 mx-4 h-px bg-gray-300"></div>
<div class="flex items-center">
<div class="w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center text-gray-500 text-sm font-medium">3</div>
<span class="ml-2 text-sm text-gray-500">é¢˜ç›®ç”Ÿæˆ</span>
</div>
</div>
</div>
<!-- è¡¨å•åŒºåŸŸ -->
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-8">
<div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
<!-- å·¦ä¾§è¡¨å• -->
<div class="space-y-6">
<div>
<label class="block text-sm font-medium text-gray-700 mb-2">ç›®æ ‡é¢†åŸŸ</label>
<div class="relative">
<button class="w-full px-4 py-3 text-left bg-white border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary" id="domainSelect">
<span class="text-gray-500" id="domainText">è¯·é€‰æ‹©ç›®æ ‡é¢†åŸŸ</span>
<div class="w-5 h-5 flex items-center justify-center absolute right-3 top-1/2 transform -translate-y-1/2">
<i class="ri-arrow-down-s-line text-gray-400"></i>
</div>
</button>
<div class="absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg hidden" id="domainDropdown">
<div class="py-1">
<div class="px-4 py-2 hover:bg-gray-100 cursor-pointer" data-value="ai">äººå·¥æ™ºèƒ½</div>
<div class="px-4 py-2 hover:bg-gray-100 cursor-pointer" data-value="frontend">å‰ç«¯å¼€å‘</div>
<div class="px-4 py-2 hover:bg-gray-100 cursor-pointer" data-value="backend">åç«¯å¼€å‘</div>
<div class="px-4 py-2 hover:bg-gray-100 cursor-pointer" data-value="mobile">ç§»åŠ¨å¼€å‘</div>
<div class="px-4 py-2 hover:bg-gray-100 cursor-pointer" data-value="data">æ•°æ®ç§‘å­¦</div>
<div class="px-4 py-2 hover:bg-gray-100 cursor-pointer" data-value="product">äº§å“ç®¡ç†</div>
</div>
</div>
</div>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-2">å…·ä½“å²—ä½</label>
<div class="relative">
<button class="w-full px-4 py-3 text-left bg-white border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary" id="positionSelect" disabled>
<span class="text-gray-400" id="positionText">è¯·å…ˆé€‰æ‹©ç›®æ ‡é¢†åŸŸ</span>
<div class="w-5 h-5 flex items-center justify-center absolute right-3 top-1/2 transform -translate-y-1/2">
<i class="ri-arrow-down-s-line text-gray-400"></i>
</div>
</button>
<div class="absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg hidden" id="positionDropdown">
<div class="py-1" id="positionOptions">
</div>
</div>
</div>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-2">å·¥ä½œç»éªŒ</label>
<div class="grid grid-cols-4 gap-2">
<button class="px-3 py-2 text-sm border border-gray-300 rounded-lg hover:border-primary hover:text-primary experience-btn" data-value="0-1">0-1å¹´</button>
<button class="px-3 py-2 text-sm border border-gray-300 rounded-lg hover:border-primary hover:text-primary experience-btn" data-value="1-3">1-3å¹´</button>
<button class="px-3 py-2 text-sm border border-gray-300 rounded-lg hover:border-primary hover:text-primary experience-btn" data-value="3-5">3-5å¹´</button>
<button class="px-3 py-2 text-sm border border-gray-300 rounded-lg hover:border-primary hover:text-primary experience-btn" data-value="5+">5å¹´ä»¥ä¸Š</button>
</div>
</div>
</div>
<!-- å³ä¾§ç®€å†ä¸Šä¼  -->
<div>
<label class="block text-sm font-medium text-gray-700 mb-2">ç®€å†ä¸Šä¼ </label>
<div class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-primary transition-colors" id="uploadArea">
<div class="w-12 h-12 flex items-center justify-center mx-auto mb-4 text-gray-400">
<i class="ri-upload-cloud-2-line ri-2x"></i>
</div>
<p class="text-gray-600 mb-2">æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„æˆ–ç‚¹å‡»ä¸Šä¼ </p>
<p class="text-sm text-gray-500">æ”¯æŒ PDFã€DOCã€DOCX æ ¼å¼ï¼Œå¤§å°ä¸è¶…è¿‡ 10MB</p>
<input type="file" class="hidden" id="resumeFile" accept=".pdf,.doc,.docx">
<button class="mt-4 px-6 py-2 bg-primary text-white rounded-button hover:bg-primary/90 whitespace-nowrap !rounded-button" id="uploadBtn">é€‰æ‹©æ–‡ä»¶</button>
</div>
<!-- æ–‡ä»¶é¢„è§ˆåŒº -->
<div class="mt-4 hidden" id="filePreview">
<div class="bg-gray-50 rounded-lg p-4 flex items-center justify-between">
<div class="flex items-center">
<div class="w-8 h-8 flex items-center justify-center bg-red-100 rounded mr-3">
<i class="ri-file-pdf-line text-red-600"></i>
</div>
<div>
<p class="text-sm font-medium text-gray-900" id="fileName">ç®€å†.pdf</p>
<p class="text-xs text-gray-500" id="fileSize">2.5 MB</p>
</div>
</div>
<button class="text-gray-400 hover:text-red-500" id="removeFile">
<div class="w-5 h-5 flex items-center justify-center">
<i class="ri-close-line"></i>
</div>
</button>
</div>
</div>
</div>
</div>
<!-- æ“ä½œæŒ‰é’® -->
<div class="flex justify-between items-center mt-8 pt-6 border-t border-gray-200">
<button class="px-6 py-3 text-gray-600 border border-gray-300 rounded-button hover:bg-gray-50 whitespace-nowrap !rounded-button">
ä¿å­˜è‰ç¨¿
</button>
<div class="flex space-x-4">
<button class="px-6 py-3 text-gray-600 border border-gray-300 rounded-button hover:bg-gray-50 whitespace-nowrap !rounded-button">
é‡ç½®
</button>
<a href="./setting_page2.html" data-readdy="true">
<button class="px-8 py-3 bg-primary text-white rounded-button hover:bg-primary/90 whitespace-nowrap !rounded-button" id="nextStep">
ä¸‹ä¸€æ­¥
</button>
</a>
</div>
</div>
</div>
</div>
</div>
<!-- å³ä¾§ä¿¡æ¯å±•ç¤ºåŒº -->
<div class="w-80 bg-white border-l border-gray-200 flex flex-col">
<div class="p-6 border-b border-gray-200">
<h3 class="text-lg font-semibold text-gray-900">é…ç½®æ‘˜è¦</h3>
</div>
<div class="flex-1 overflow-y-auto p-6 space-y-6 h-full min-h-0">
<!-- å·²é…ç½®ä¿¡æ¯ -->
<div class="bg-gray-50 rounded-lg p-4">
<h4 class="text-sm font-medium text-gray-900 mb-3">å½“å‰é…ç½®</h4>
<div class="space-y-2 text-sm">
<div class="flex justify-between">
<span class="text-gray-600">ç›®æ ‡é¢†åŸŸ:</span>
<span class="text-gray-900" id="summaryDomain">æœªé€‰æ‹©</span>
</div>
<div class="flex justify-between">
<span class="text-gray-600">å…·ä½“å²—ä½:</span>
<span class="text-gray-900" id="summaryPosition">æœªé€‰æ‹©</span>
</div>
<div class="flex justify-between">
<span class="text-gray-600">å·¥ä½œç»éªŒ:</span>
<span class="text-gray-900" id="summaryExperience">æœªé€‰æ‹©</span>
</div>
<div class="flex justify-between">
<span class="text-gray-600">ç®€å†çŠ¶æ€:</span>
<span class="text-gray-900" id="summaryResume">æœªä¸Šä¼ </span>
</div>
</div>
</div>
<!-- ç®€å†è§£æç»“æœ -->
<div class="hidden" id="resumeAnalysis">
<h4 class="text-sm font-medium text-gray-900 mb-3">ç®€å†è§£æ</h4>
<div class="bg-blue-50 rounded-lg p-4">
<div class="flex items-center mb-2">
<div class="w-4 h-4 flex items-center justify-center mr-2">
<i class="ri-check-line text-blue-600"></i>
</div>
<span class="text-sm text-blue-900">è§£æå®Œæˆ</span>
</div>
<p class="text-xs text-blue-700">å·²è¯†åˆ« 8 ä¸ªæŠ€èƒ½ç‚¹å’Œ 3 ä¸ªé¡¹ç›®ç»éªŒ</p>
</div>
</div>
<!-- æŠ€èƒ½ç‚¹å±•ç¤º -->
<div class="hidden" id="skillsSection">
<h4 class="text-sm font-medium text-gray-900 mb-3">è¯†åˆ«æŠ€èƒ½</h4>
<div class="flex flex-wrap gap-2">
<span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded">Python</span>
<span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded">æœºå™¨å­¦ä¹ </span>
<span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded">æ·±åº¦å­¦ä¹ </span>
<span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded">TensorFlow</span>
<span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded">æ•°æ®åˆ†æ</span>
<span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded">ç®—æ³•ä¼˜åŒ–</span>
</div>
</div>
<!-- é¡¹ç›®ç»éªŒ -->
<div class="hidden" id="projectsSection">
<h4 class="text-sm font-medium text-gray-900 mb-3">é¡¹ç›®ç»éªŒ</h4>
<div class="space-y-3">
<div class="bg-gray-50 rounded-lg p-3">
<h5 class="text-sm font-medium text-gray-900">æ™ºèƒ½æ¨èç³»ç»Ÿ</h5>
<p class="text-xs text-gray-600 mt-1">åŸºäºæ·±åº¦å­¦ä¹ çš„ä¸ªæ€§åŒ–æ¨èç®—æ³•</p>
</div>
<div class="bg-gray-50 rounded-lg p-3">
<h5 class="text-sm font-medium text-gray-900">å›¾åƒè¯†åˆ«å¹³å°</h5>
<p class="text-xs text-gray-600 mt-1">è®¡ç®—æœºè§†è§‰åœ¨å·¥ä¸šæ£€æµ‹ä¸­çš„åº”ç”¨</p>
</div>
<div class="bg-gray-50 rounded-lg p-3">
<h5 class="text-sm font-medium text-gray-900">æ•°æ®æŒ–æ˜å·¥å…·</h5>
<p class="text-xs text-gray-600 mt-1">å¤§æ•°æ®å¤„ç†ä¸åˆ†æç³»ç»Ÿå¼€å‘</p>
</div>
</div>
</div>
<!-- æ¨èé¢˜ç›®é¢„è§ˆ -->
<div class="hidden" id="questionsPreview">
<h4 class="text-sm font-medium text-gray-900 mb-3">æ¨èé¢˜ç›®</h4>
<div class="bg-green-50 rounded-lg p-4">
<div class="flex items-center mb-2">
<div class="w-4 h-4 flex items-center justify-center mr-2">
<i class="ri-lightbulb-line text-green-600"></i>
</div>
<span class="text-sm text-green-900">å·²ç”Ÿæˆ 25 é“é¢˜ç›®</span>
</div>
<div class="text-xs text-green-700 space-y-1">
<p>â€¢ åŸºç¡€ç†è®º: 8 é¢˜</p>
<p>â€¢ ç®—æ³•å®ç°: 10 é¢˜</p>
<p>â€¢ é¡¹ç›®ç»éªŒ: 7 é¢˜</p>
</div>
</div>
</div>
</div>
<!-- å¸®åŠ©ä¿¡æ¯ -->
<div class="p-6 border-t border-gray-200">
<div class="bg-yellow-50 rounded-lg p-4">
<div class="flex items-start">
<div class="w-5 h-5 flex items-center justify-center mr-2 mt-0.5">
<i class="ri-information-line text-yellow-600"></i>
</div>
<div>
<h5 class="text-sm font-medium text-yellow-900">ä½¿ç”¨æç¤º</h5>
<p class="text-xs text-yellow-700 mt-1">
ä¸Šä¼ ç®€å†åï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è§£ææ‚¨çš„æŠ€èƒ½å’Œç»éªŒï¼Œå¹¶æ®æ­¤æ¨èæœ€é€‚åˆçš„é¢è¯•é¢˜ç›®ã€‚
</p>
</div>
</div>
</div>
</div>
</div>
</div>
<script id="dropdown-handlers">
document.addEventListener('DOMContentLoaded', function() {
const domainSelect = document.getElementById('domainSelect');
const domainDropdown = document.getElementById('domainDropdown');
const domainText = document.getElementById('domainText');
const positionSelect = document.getElementById('positionSelect');
const positionDropdown = document.getElementById('positionDropdown');
const positionText = document.getElementById('positionText');
const positionOptions = document.getElementById('positionOptions');
const positions = {
ai: ['ç®—æ³•å·¥ç¨‹å¸ˆ', 'æœºå™¨å­¦ä¹ å·¥ç¨‹å¸ˆ', 'æ·±åº¦å­¦ä¹ å·¥ç¨‹å¸ˆ', 'AI äº§å“ç»ç†', 'æ•°æ®ç§‘å­¦å®¶'],
frontend: ['å‰ç«¯å·¥ç¨‹å¸ˆ', 'React å¼€å‘å·¥ç¨‹å¸ˆ', 'Vue å¼€å‘å·¥ç¨‹å¸ˆ', 'UI å·¥ç¨‹å¸ˆ', 'å‰ç«¯æ¶æ„å¸ˆ'],
backend: ['åç«¯å·¥ç¨‹å¸ˆ', 'Java å¼€å‘å·¥ç¨‹å¸ˆ', 'Python å¼€å‘å·¥ç¨‹å¸ˆ', 'ç³»ç»Ÿæ¶æ„å¸ˆ', 'DevOps å·¥ç¨‹å¸ˆ'],
mobile: ['iOS å¼€å‘å·¥ç¨‹å¸ˆ', 'Android å¼€å‘å·¥ç¨‹å¸ˆ', 'Flutter å¼€å‘å·¥ç¨‹å¸ˆ', 'ç§»åŠ¨ç«¯æ¶æ„å¸ˆ'],
data: ['æ•°æ®åˆ†æå¸ˆ', 'æ•°æ®å·¥ç¨‹å¸ˆ', 'å•†ä¸šåˆ†æå¸ˆ', 'æ•°æ®äº§å“ç»ç†'],
product: ['äº§å“ç»ç†', 'é«˜çº§äº§å“ç»ç†', 'äº§å“æ€»ç›‘', 'Bç«¯äº§å“ç»ç†', 'Cç«¯äº§å“ç»ç†']
};
domainSelect.addEventListener('click', function() {
domainDropdown.classList.toggle('hidden');
});
positionSelect.addEventListener('click', function() {
if (!positionSelect.disabled) {
positionDropdown.classList.toggle('hidden');
}
});
domainDropdown.addEventListener('click', function(e) {
if (e.target.dataset.value) {
const value = e.target.dataset.value;
const text = e.target.textContent;
domainText.textContent = text;
domainText.classList.remove('text-gray-500');
domainText.classList.add('text-gray-900');
domainDropdown.classList.add('hidden');
positionSelect.disabled = false;
positionText.textContent = 'è¯·é€‰æ‹©å…·ä½“å²—ä½';
positionText.classList.remove('text-gray-400');
positionText.classList.add('text-gray-500');
positionOptions.innerHTML = '';
positions[value].forEach(pos => {
const div = document.createElement('div');
div.className = 'px-4 py-2 hover:bg-gray-100 cursor-pointer';
div.dataset.value = pos;
div.textContent = pos;
positionOptions.appendChild(div);
});
document.getElementById('summaryDomain').textContent = text;
}
});
positionDropdown.addEventListener('click', function(e) {
if (e.target.dataset.value) {
const text = e.target.textContent;
positionText.textContent = text;
positionText.classList.remove('text-gray-500');
positionText.classList.add('text-gray-900');
positionDropdown.classList.add('hidden');
document.getElementById('summaryPosition').textContent = text;
}
});
document.addEventListener('click', function(e) {
if (!domainSelect.contains(e.target) && !domainDropdown.contains(e.target)) {
domainDropdown.classList.add('hidden');
}
if (!positionSelect.contains(e.target) && !positionDropdown.contains(e.target)) {
positionDropdown.classList.add('hidden');
}
});
});
</script>
<script id="experience-handler">
document.addEventListener('DOMContentLoaded', function() {
const experienceBtns = document.querySelectorAll('.experience-btn');
experienceBtns.forEach(btn => {
btn.addEventListener('click', function() {
experienceBtns.forEach(b => {
b.classList.remove('border-primary', 'text-primary', 'bg-primary/10');
b.classList.add('border-gray-300', 'text-gray-700');
});
this.classList.remove('border-gray-300', 'text-gray-700');
this.classList.add('border-primary', 'text-primary', 'bg-primary/10');
document.getElementById('summaryExperience').textContent = this.textContent;
});
});
});
</script>
<script id="file-upload-handler">
document.addEventListener('DOMContentLoaded', function() {
const uploadArea = document.getElementById('uploadArea');
const uploadBtn = document.getElementById('uploadBtn');
const resumeFile = document.getElementById('resumeFile');
const filePreview = document.getElementById('filePreview');
const fileName = document.getElementById('fileName');
const fileSize = document.getElementById('fileSize');
const removeFile = document.getElementById('removeFile');
let currentTaskId = null;

uploadBtn.addEventListener('click', function() {
resumeFile.click();
});

uploadArea.addEventListener('click', function() {
resumeFile.click();
});

uploadArea.addEventListener('dragover', function(e) {
e.preventDefault();
uploadArea.classList.add('border-primary', 'bg-primary/5');
});

uploadArea.addEventListener('dragleave', function(e) {
e.preventDefault();
uploadArea.classList.remove('border-primary', 'bg-primary/5');
});

uploadArea.addEventListener('drop', function(e) {
e.preventDefault();
uploadArea.classList.remove('border-primary', 'bg-primary/5');
const files = e.dataTransfer.files;
if (files.length > 0) {
handleFile(files[0]);
}
});

resumeFile.addEventListener('change', function(e) {
if (e.target.files.length > 0) {
handleFile(e.target.files[0]);
}
});

removeFile.addEventListener('click', function() {
filePreview.classList.add('hidden');
uploadArea.classList.remove('hidden');
resumeFile.value = '';
document.getElementById('summaryResume').textContent = 'æœªä¸Šä¼ ';
document.getElementById('resumeAnalysis').classList.add('hidden');
document.getElementById('skillsSection').classList.add('hidden');
document.getElementById('projectsSection').classList.add('hidden');
document.getElementById('questionsPreview').classList.add('hidden');
if (currentTaskId) {
fetch(`/api/v1/resume/cleanup/${currentTaskId}`, { method: 'DELETE' });
currentTaskId = null;
}
});

async function handleFile(file) {
// éªŒè¯æ–‡ä»¶ç±»å‹
if (!file.name.toLowerCase().endsWith('.pdf')) {
showError('åªæ”¯æŒPDFæ ¼å¼çš„ç®€å†æ–‡ä»¶');
return;
}

// éªŒè¯æ–‡ä»¶å¤§å°ï¼ˆ10MBï¼‰
if (file.size > 10 * 1024 * 1024) {
showError('æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡10MB');
return;
}

fileName.textContent = file.name;
fileSize.textContent = (file.size / 1024 / 1024).toFixed(1) + ' MB';
filePreview.classList.remove('hidden');
uploadArea.classList.add('hidden');
document.getElementById('summaryResume').textContent = 'æ­£åœ¨åˆ†æ...';

// æ˜¾ç¤ºåŠ è½½åŠ¨ç”»
showLoadingAnimation();

try {
// è·å–è¡¨å•æ•°æ®
const domain = document.getElementById('summaryDomain').textContent;
const position = document.getElementById('summaryPosition').textContent;
const experience = document.getElementById('summaryExperience').textContent;

// åˆ›å»ºFormData
const formData = new FormData();
formData.append('file', file);
if (domain !== 'æœªé€‰æ‹©') formData.append('domain', domain);
if (position !== 'æœªé€‰æ‹©') formData.append('position', position);
if (experience !== 'æœªé€‰æ‹©') formData.append('experience', experience);

// ä¸Šä¼ æ–‡ä»¶
const response = await fetch('/api/v1/resume/upload', {
method: 'POST',
body: formData
});

const result = await response.json();

if (result.success) {
currentTaskId = result.task_id;
// å¼€å§‹è½®è¯¢åˆ†æçŠ¶æ€
pollAnalysisStatus(result.task_id);
} else {
throw new Error(result.message || 'ä¸Šä¼ å¤±è´¥');
}

} catch (error) {
console.error('æ–‡ä»¶å¤„ç†å¤±è´¥:', error);
showError('æ–‡ä»¶å¤„ç†å¤±è´¥: ' + error.message);
hideLoadingAnimation();
document.getElementById('summaryResume').textContent = 'ä¸Šä¼ å¤±è´¥';
}
}

async function pollAnalysisStatus(taskId) {
const maxAttempts = 120; // æœ€å¤šç­‰å¾…10åˆ†é’Ÿ
let attempts = 0;

const poll = async () => {
try {
const response = await fetch(`/api/v1/resume/status/${taskId}`);
const result = await response.json();

if (result.success) {
if (result.status === 'completed') {
// åˆ†æå®Œæˆï¼Œå¼ºåˆ¶è¿›åº¦100%å¹¶æ˜¾ç¤ºå®Œæˆæ–‡æœ¬
updateProgress(100);
const progressText = document.getElementById('progressText');
const progressDetail = document.getElementById('progressDetail');
if (progressText) progressText.textContent = 'åˆ†æå®Œæˆï¼';
if (progressDetail) progressDetail.textContent = 'ç®€å†åˆ†æå·²å®Œæˆï¼Œæ­£åœ¨æ¸²æŸ“ç»“æœ...';
updateAnalysisResults(result.result);
document.getElementById('summaryResume').textContent = 'åˆ†æå®Œæˆ';
hideLoadingAnimation();
console.log('âœ… ç®€å†åˆ†æå®Œæˆ');
return;
} else if (result.status === 'failed') {
// åˆ†æå¤±è´¥
hideLoadingAnimation();
showError('ç®€å†åˆ†æå¤±è´¥: ' + (result.error || 'æœªçŸ¥é”™è¯¯'));
document.getElementById('summaryResume').textContent = 'åˆ†æå¤±è´¥';
console.log('âŒ ç®€å†åˆ†æå¤±è´¥');
} else {
// æ›´æ–°è¿›åº¦
updateProgress(result.progress);
console.log(`ğŸ“Š åˆ†æè¿›åº¦: ${result.progress}%`);
// ç»§ç»­è½®è¯¢
if (attempts < maxAttempts) {
attempts++;
// æ ¹æ®è¿›åº¦è°ƒæ•´è½®è¯¢é—´éš”
let pollInterval = 3000; // é»˜è®¤3ç§’
if (result.progress > 80) {
pollInterval = 2000; // æ¥è¿‘å®Œæˆæ—¶2ç§’
} else if (result.progress > 50) {
pollInterval = 2500; // ä¸­æœŸ2.5ç§’
}
setTimeout(poll, pollInterval);
} else {
hideLoadingAnimation();
showError('åˆ†æè¶…æ—¶ï¼Œè¯·é‡è¯•');
document.getElementById('summaryResume').textContent = 'åˆ†æè¶…æ—¶';
console.log('â° åˆ†æè¶…æ—¶');
}
}
} else {
throw new Error(result.message || 'è·å–çŠ¶æ€å¤±è´¥');
}
} catch (error) {
console.error('è½®è¯¢çŠ¶æ€å¤±è´¥:', error);
hideLoadingAnimation();
showError('è·å–åˆ†æçŠ¶æ€å¤±è´¥');
document.getElementById('summaryResume').textContent = 'çŠ¶æ€è·å–å¤±è´¥';
}
};

poll();
}

function updateProgress(progress) {
// æ›´æ–°è¿›åº¦æ¡
const progressBar = document.querySelector('.progress-bar');
const progressText = document.getElementById('progressText');
const progressDetail = document.getElementById('progressDetail');

if (progressBar) {
progressBar.style.width = progress + '%';
}

if (progressText) {
progressText.textContent = `åˆ†æè¿›åº¦: ${progress}%`;
}

// æ ¹æ®è¿›åº¦æ˜¾ç¤ºä¸åŒçš„è¯¦ç»†ä¿¡æ¯
if (progressDetail) {
let detailText = '';
if (progress <= 10) {
detailText = 'ä»»åŠ¡åˆå§‹åŒ–ä¸­...';
} else if (progress <= 30) {
detailText = 'æ­£åœ¨åŠ è½½PDFæ–‡ä»¶...';
} else if (progress <= 50) {
detailText = 'æ­£åœ¨åˆå¹¶æ–‡æœ¬å†…å®¹...';
} else if (progress <= 90) {
detailText = 'æ­£åœ¨è°ƒç”¨AIæ¨¡å‹è¿›è¡Œç»¼åˆåˆ†æ...';
} else if (progress < 100) {
detailText = 'æ­£åœ¨æ•´ç†åˆ†æç»“æœ...';
} else {
detailText = 'åˆ†æå®Œæˆï¼';
}
progressDetail.textContent = detailText;
}
}

function updateAnalysisResults(result) {
// æ›´æ–°åŸºæœ¬ä¿¡æ¯
if (result.basic_info) {
const basicInfo = result.basic_info;
document.getElementById('summaryDomain').textContent = basicInfo.current_position || 'å·²è¯†åˆ«';
}

// æ›´æ–°æŠ€èƒ½ç‚¹
if (result.skills && result.skills.length > 0) {
const skillsContainer = document.getElementById('skillsSection');
const skillsList = skillsContainer.querySelector('.flex.flex-wrap.gap-2');
skillsList.innerHTML = '';
result.skills.forEach(skill => {
const skillTag = document.createElement('span');
skillTag.className = 'px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded';
skillTag.textContent = skill;
skillsList.appendChild(skillTag);
});
skillsContainer.classList.remove('hidden');
}

// æ›´æ–°é¡¹ç›®ç»éªŒ
if (result.projects && result.projects.length > 0) {
const projectsContainer = document.getElementById('projectsSection');
const projectsList = projectsContainer.querySelector('.space-y-3');
projectsList.innerHTML = '';
result.projects.forEach(project => {
const projectDiv = document.createElement('div');
projectDiv.className = 'bg-gray-50 rounded-lg p-3';
projectDiv.innerHTML = `
<h5 class="text-sm font-medium text-gray-900">${project.name}</h5>
<p class="text-xs text-gray-600 mt-1">${project.description}</p>
`;
projectsList.appendChild(projectDiv);
});
projectsContainer.classList.remove('hidden');
}

// æ˜¾ç¤ºåˆ†æå®Œæˆæç¤º
document.getElementById('resumeAnalysis').classList.remove('hidden');
}

function showLoadingAnimation() {
// åˆ›å»ºåŠ è½½åŠ¨ç”»
const loadingOverlay = document.createElement('div');
loadingOverlay.id = 'loadingOverlay';
loadingOverlay.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
loadingOverlay.innerHTML = `
<div class="bg-white rounded-lg p-8 max-w-md w-full mx-4 text-center">
<div class="animate-spin rounded-full h-16 w-16 border-b-2 border-primary mx-auto mb-4"></div>
<h3 class="text-lg font-medium text-gray-900 mb-2">æ­£åœ¨åˆ†æç®€å†</h3>
<p class="text-gray-600 mb-4">è¯·ç¨å€™ï¼Œç³»ç»Ÿæ­£åœ¨è°ƒç”¨Spark Proæ™ºèƒ½è§£ææ‚¨çš„ç®€å†...</p>
<div class="w-full bg-gray-200 rounded-full h-2">
<div class="bg-primary h-2 rounded-full progress-bar transition-all duration-300" style="width: 0%"></div>
</div>
<div class="mt-2 text-sm text-gray-500" id="progressText">æ­£åœ¨åˆå§‹åŒ–...</div>
<div class="mt-1 text-xs text-gray-400" id="progressDetail">å‡†å¤‡å¼€å§‹åˆ†æ</div>
</div>
`;
document.body.appendChild(loadingOverlay);
}

function hideLoadingAnimation() {
const loadingOverlay = document.getElementById('loadingOverlay');
if (loadingOverlay) {
loadingOverlay.remove();
}
}

function showError(message) {
// æ˜¾ç¤ºé”™è¯¯æç¤º
const errorDialog = document.createElement('div');
errorDialog.className = 'fixed inset-0 flex items-center justify-center z-50';
errorDialog.innerHTML = `
<div class="fixed inset-0 bg-black/50"></div>
<div class="relative bg-white rounded-lg p-6 max-w-sm w-full mx-4">
<div class="flex items-center mb-4">
<div class="w-10 h-10 bg-red-100 rounded-full flex items-center justify-center mr-3">
<i class="ri-error-warning-line text-red-600"></i>
</div>
<h3 class="text-lg font-medium text-gray-900">é”™è¯¯</h3>
</div>
<p class="text-gray-600 mb-4">${message}</p>
<button class="w-full px-4 py-2 bg-primary text-white rounded-button hover:bg-primary/90" onclick="this.closest('.fixed').remove()">ç¡®å®š</button>
</div>
`;
document.body.appendChild(errorDialog);
}
});
</script>
<script id="next-step-handler">
document.addEventListener('DOMContentLoaded', function() {
const nextStep = document.getElementById('nextStep');
const nextStepLink = nextStep.parentElement;
nextStep.addEventListener('click', function(e) {
const domain = document.getElementById('summaryDomain').textContent;
const position = document.getElementById('summaryPosition').textContent;
const experience = document.getElementById('summaryExperience').textContent;
const resume = document.getElementById('summaryResume').textContent;
if (domain === 'æœªé€‰æ‹©' || position === 'æœªé€‰æ‹©' || experience === 'æœªé€‰æ‹©') {
e.preventDefault();
const dialog = document.createElement('div');
dialog.className = 'fixed inset-0 flex items-center justify-center z-50';
dialog.innerHTML = `
<div class="fixed inset-0 bg-black/50"></div>
<div class="relative bg-white rounded-lg p-6 max-w-sm w-full mx-4">
<h3 class="text-lg font-medium text-gray-900 mb-2">æç¤º</h3>
<p class="text-gray-600 mb-4">è¯·å®Œå–„åŸºç¡€ä¿¡æ¯é…ç½®</p>
<button class="w-full px-4 py-2 bg-primary text-white rounded-button">ç¡®å®š</button>
</div>
`;
document.body.appendChild(dialog);
dialog.querySelector('button').onclick = () => dialog.remove();
return;
}
if (resume === 'æœªä¸Šä¼ ' || resume === 'æ­£åœ¨åˆ†æ...' || resume === 'ä¸Šä¼ å¤±è´¥' || resume === 'åˆ†æå¤±è´¥' || resume === 'åˆ†æè¶…æ—¶' || resume === 'çŠ¶æ€è·å–å¤±è´¥') {
e.preventDefault();
const dialog = document.createElement('div');
dialog.className = 'fixed inset-0 flex items-center justify-center z-50';
dialog.innerHTML = `
<div class="fixed inset-0 bg-black/50"></div>
<div class="relative bg-white rounded-lg p-6 max-w-sm w-full mx-4">
<h3 class="text-lg font-medium text-gray-900 mb-2">æç¤º</h3>
<p class="text-gray-600 mb-4">è¯·ä¸Šä¼ å¹¶å®Œæˆç®€å†åˆ†æ</p>
<button class="w-full px-4 py-2 bg-primary text-white rounded-button">ç¡®å®š</button>
</div>
`;
document.body.appendChild(dialog);
dialog.querySelector('button').onclick = () => dialog.remove();
return;
}

// å¦‚æœæœ‰åˆ†æç»“æœï¼Œä¼ é€’åˆ°ä¸‹ä¸€é¡µ
if (currentTaskId && resume === 'åˆ†æå®Œæˆ') {
  window.location.href = `./setting_page2.html?taskId=${currentTaskId}`;
} else {
  e.preventDefault();
  alert('è¯·å…ˆå®Œæˆç®€å†ä¸Šä¼ å’Œåˆ†æï¼');
}
});
});
</script>
</body>
</html>